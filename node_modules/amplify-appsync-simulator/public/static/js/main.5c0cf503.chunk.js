(this["webpackJsonpamplify-graphiql-explorer"]=this["webpackJsonpamplify-graphiql-explorer"]||[]).push([[0],{275:function(e,t,n){var o={".":96,"./":96,"./GraphQLLanguageService":197,"./GraphQLLanguageService.js":197,"./GraphQLLanguageService.js.flow":501,"./autocompleteUtils":138,"./autocompleteUtils.js":138,"./autocompleteUtils.js.flow":502,"./getAutocompleteSuggestions":113,"./getAutocompleteSuggestions.js":113,"./getAutocompleteSuggestions.js.flow":503,"./getDefinition":139,"./getDefinition.js":139,"./getDefinition.js.flow":504,"./getDiagnostics":141,"./getDiagnostics.js":141,"./getDiagnostics.js.flow":505,"./getHoverInformation":142,"./getHoverInformation.js":142,"./getHoverInformation.js.flow":506,"./getOutline":196,"./getOutline.js":196,"./getOutline.js.flow":507,"./index":96,"./index.js":96,"./index.js.flow":508};function a(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id=275},415:function(e,t,n){e.exports=n(791)},420:function(e,t,n){},543:function(e,t,n){},547:function(e,t){},549:function(e,t){},583:function(e,t){},584:function(e,t){},791:function(e,t,n){"use strict";n.r(t);var o,a=n(1),r=n.n(a),i=n(73),c=n.n(i),l=(n(420),n(135)),s=n(130),u=n.n(s),h=n(382),p=n(171),d=n(172),O=n(182),f=n(173),g=n(53),m=n(183),I=n(174),y=n(75),T=n.n(y),C=n(385),E=n.n(C),b=(n(541),n(82)),k=n(384),A=n(810),v=(n(542),n(543),n(813)),N=n(811),j=n(815),M=n(136),_=n(812),w=n(814),D=n(792),S=n(184);function P(e){try{"string"===typeof e&&(e=JSON.parse(e));var t=Object(S.sign)(e,"open-secrete");return Object(S.verify)(t,"open-secrete"),t}catch(n){throw new Error("Error when generating OIDC token: "+n.message)}}function J(e){return Object(S.decode)(e)}function G(e,t){var n=J(e);if(!Object.keys(n).length)throw new Error("Invalid token ".concat(e));return t&&(n.iss=t),n.exp=Math.floor(Date.now()/100+2e4),P(JSON.stringify(n))}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}!function(e){e.API_KEY="API_KEY",e.AMAZON_COGNITO_USER_POOLS="AMAZON_COGNITO_USER_POOLS",e.OPENID_CONNECT="OPENID_CONNECT"}(o||(o={}));var L=function(e){function t(e){var n,a;Object(p.a)(this,t);for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];(a=Object(O.a)(this,(n=Object(f.a)(t)).call.apply(n,[this,e].concat(i)))).state={currentCognitoToken:"",currentOIDCTokenDecoded:"",currentOIDCToken:"",userName:"",issuer:"",userGroups:[],apiKey:"",possibleGroups:[],email:"",supportedAuthModes:[o.API_KEY],isOpen:!0,currentAuthMode:o.API_KEY,oidcTokenError:""};var l=a.parseJWTToken(a.props.currentCognitoToken)||{},s={userName:l["cognito:username"]||"",userGroups:l["cognito:groups"]||[],issuer:l.iss,email:l.email,possibleGroups:l["cognito:groups"]||[]};return a.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.state,{},s,{currentCognitoToken:a.props.currentCognitoToken||"",currentOIDCToken:a.props.currentOIDCToken||"",currentOIDCTokenDecoded:JSON.stringify(a.parseJWTToken(a.props.currentOIDCToken),null,4)||"",apiKey:e.apiKey||"",supportedAuthModes:a.props.authModes,currentAuthMode:e.selectedAuthMode}),a.onClose=a.onClose.bind(Object(g.a)(a)),a.onGroupChange=a.onGroupChange.bind(Object(g.a)(a)),a.onGroupAdd=a.onGroupAdd.bind(Object(g.a)(a)),a.onGenerate=a.onGenerate.bind(Object(g.a)(a)),a.changeAPIKey=a.changeAPIKey.bind(Object(g.a)(a)),a.changeEmail=a.changeEmail.bind(Object(g.a)(a)),a.onUserNameChange=a.onUserNameChange.bind(Object(g.a)(a)),a.onOIDCTokenChange=a.onOIDCTokenChange.bind(Object(g.a)(a)),a.onAuthModeChange=a.onAuthModeChange.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"onClose",value:function(){var e={authMode:this.state.currentAuthMode,apiKey:this.state.currentAuthMode===o.API_KEY?this.state.apiKey:null,cognitoToken:this.state.currentAuthMode===o.AMAZON_COGNITO_USER_POOLS?this.state.currentCognitoToken:null,OIDCToken:this.state.currentAuthMode===o.OPENID_CONNECT?this.state.currentOIDCToken:null};this.props.onClose&&this.props.onClose(e)}},{key:"onGroupChange",value:function(e,t){this.setState({userGroups:t.value})}},{key:"onGroupAdd",value:function(e,t){this.setState({possibleGroups:[].concat(Object(l.a)(this.state.possibleGroups),[t.value])})}},{key:"onUserNameChange",value:function(e,t){this.setState({userName:t.value})}},{key:"onOIDCTokenChange",value:function(e,t){this.setState({currentOIDCTokenDecoded:t.value})}},{key:"onAuthModeChange",value:function(e,t){this.setState({currentAuthMode:t.value})}},{key:"changeEmail",value:function(e,t){this.setState({email:t.value})}},{key:"changeAPIKey",value:function(e,t){this.setState({apiKey:t.value})}},{key:"render",value:function(){var e,t="Save";if(this.state.currentAuthMode===o.API_KEY)e=r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"ApiKey"),r.a.createElement(N.a,{readOnly:!0,placeholder:"APIKey",value:this.state.apiKey,onChange:this.changeAPIKey})));else if(this.state.currentAuthMode===o.AMAZON_COGNITO_USER_POOLS)t="Generate Token",e=r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Username"),r.a.createElement(N.a,{placeholder:"User Name",value:this.state.userName,onChange:this.onUserNameChange})),r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Groups"),r.a.createElement(j.a,{placeholder:"Choose cognito user groups",search:!0,options:this.state.possibleGroups.map((function(e){return{key:e,value:e,text:e}})),selection:!0,fluid:!0,multiple:!0,allowAdditions:!0,value:this.state.userGroups,onAddItem:this.onGroupAdd,onChange:this.onGroupChange})),r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Email"),r.a.createElement(N.a,{placeholder:"Email",value:this.state.email,onChange:this.changeEmail})));else if(this.state.currentAuthMode===o.OPENID_CONNECT){var n=this.state.oidcTokenError?r.a.createElement(M.a,{basic:!0,color:"red",pointing:"below"},this.state.oidcTokenError):null;e=r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a.Field,null,r.a.createElement("label",null,"Decoded OpenID Connect Token"),n,r.a.createElement(_.a,{onChange:this.onOIDCTokenChange,rows:10,placeholder:"Decoded OIDC Token",spellCheck:"false",value:this.state.currentOIDCTokenDecoded})))}var a=this.state.supportedAuthModes.filter((function(e){return e})).map((function(e){return{key:e,value:e,text:e}}));return r.a.createElement(w.a,{onClose:this.onClose,onActionClick:this.onGenerate,open:this.state.isOpen},r.a.createElement(w.a.Header,null,"Auth Options"),r.a.createElement(w.a.Content,null,r.a.createElement(w.a.Description,null,r.a.createElement(j.a,{placeholder:"Auth Mode",selection:!0,options:a,value:this.state.currentAuthMode,onChange:this.onAuthModeChange}),r.a.createElement(v.a,null,e))),r.a.createElement(w.a.Actions,null,r.a.createElement(D.a,{primary:!0,onClick:this.onGenerate},t)))}},{key:"onGenerate",value:function(){var e=this;try{var t={isOpen:!1};this.state.currentAuthMode===o.AMAZON_COGNITO_USER_POOLS?t.currentCognitoToken=this.generateCognitoJWTToken():this.state.currentAuthMode===o.OPENID_CONNECT&&(t.currentOIDCToken=this.generateOIDCJWTToken()),this.setState(t,(function(){e.onClose()}))}catch(n){}}},{key:"generateCognitoJWTToken",value:function(){var e={sub:"7d8ca528-4931-4254-9273-ea5ee853f271","cognito:groups":[],email_verified:!0,algorithm:"HS256",iss:"https://cognito-idp.us-east-1.amazonaws.com/us-east-1_fake_idp",phone_number_verified:!0,"cognito:username":"","cognito:roles":[],aud:"2hifa096b3a24mvm3phskuaqi3",event_id:"18f4067e-9985-4eae-9f33-f45f495470d0",token_use:"id",phone_number:"+12062062016",exp:Math.floor(Date.now()/1e3)+43200,email:this.state.email};return e["cognito:username"]=this.state.userName,e["cognito:groups"]=this.state.userGroups,e.auth_time=Math.floor(Date.now()/1e3),P(e)}},{key:"generateOIDCJWTToken",value:function(){var e=this.state.currentOIDCTokenDecoded||"";try{return P(e)}catch(t){throw this.setState({oidcTokenError:t.message}),t}}},{key:"parseJWTToken",value:function(e){return J(e)}}]),t}(a.Component);function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){Object(I.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI3ZDhjYTUyOC00OTMxLTQyNTQtOTI3My1lYTVlZTg1M2YyNzEiLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiaXNzIjoiaHR0cHM6Ly9jb2duaXRvLWlkcC51cy1lYXN0LTEuYW1hem9uYXdzLmNvbS91cy1lYXN0LTFfZmFrZSIsInBob25lX251bWJlcl92ZXJpZmllZCI6dHJ1ZSwiY29nbml0bzp1c2VybmFtZSI6InVzZXIxIiwiYXVkIjoiMmhpZmEwOTZiM2EyNG12bTNwaHNrdWFxaTMiLCJldmVudF9pZCI6ImIxMmEzZTJmLTdhMzYtNDkzYy04NWIzLTIwZDgxOGJkNzhhMSIsInRva2VuX3VzZSI6ImlkIiwiYXV0aF90aW1lIjoxOTc0MjY0NDEyLCJwaG9uZV9udW1iZXIiOiIrMTIwNjIwNjIwMTYiLCJleHAiOjE1NjQyNjgwMTIsImlhdCI6MTU2NDI2NDQxMywiZW1haWwiOiJ1c2VyQGRvbWFpbi5jb20ifQ.wHKY2KIhvWn4zpJ4TZ1vS3zRE9mGWsLY4NCV2Cof17Q",Z="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1c2VyMSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJpc3MiOiJodHRwczovL3NvbWUtb2lkYy1wcm92aWRlci9hdXRoIiwicGhvbmVfbnVtYmVyX3ZlcmlmaWVkIjp0cnVlLCJhdWQiOiIyaGlmYTA5NmIzYTI0bXZtM3Boc2t1YXFpMyIsImV2ZW50X2lkIjoiYjEyYTNlMmYtN2EzNi00OTNjLTg1YjMtMjBkODE4YmQ3OGExIiwidG9rZW5fdXNlIjoiaWQiLCJhdXRoX3RpbWUiOjE5NzQyNjQ0MTIsInBob25lX251bWJlciI6IisxMjA2MjA2MjAxNiIsImV4cCI6MTU2NDI2ODAxMiwiaWF0IjoxNTY0MjY0NDEzLCJlbWFpbCI6InVzZXJAZG9tYWluLmNvbSJ9.uAegFXomOnA7Dkl-5FcS5icu5kL9Juqb81GnTrOZZqM",U={AMAZON_COGNITO_USER_POOLS:"User Pool",API_KEY:"API Key",OPENID_CONNECT:"Open ID"},R={name:"AppSyncTransformer",defaultAuthenticationType:{authenticationType:"API_KEY"},additionalAuthenticationProviders:[],apiKey:"da2-fakeApiId123456"},F="AMPLIFY_GRPAHIQL_EXPLORER_COGNITO_JWT_TOKEN",V="AMPLIFY_GRPAHIQL_EXPLORER_OIDC_JWT_TOKEN",X="AMPLIFY_GRPAHIQL_EXPLORER_API_KEY";function z(e,t){var n=x({Accept:"application/json","Content-Type":"application/json"},t);return fetch("/graphql",{method:"POST",headers:n,body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){try{return JSON.parse(e)}catch(t){return e}}))}var Q="# shift-option/alt-click on a query below to jump to it in the explorer\n# option/alt-click on a field in the explorer to select all subfields\n",q=function(e){function t(e){var n,a;Object(p.a)(this,t);for(var r=arguments.length,i=new Array(r>1?r-1:0),c=1;c<r;c++)i[c-1]=arguments[c];return(a=Object(O.a)(this,(n=Object(f.a)(t)).call.apply(n,[this,e].concat(i))))._graphiql=void 0,a.state={schema:null,query:Q,explorerIsOpen:!0,authModalVisible:!1,apiInfo:R,currentAuthMode:o.API_KEY,credentials:{apiKey:"",cognitoJWTToken:"",oidcJWTToken:""}},a.toggleAuthModal=function(){return a.setState((function(e){return{authModalVisible:!e.authModalVisible}}))},a.switchAuthMode=function(e){a.setState({currentAuthMode:e})},a._handleInspectOperation=function(e,t){var n=Object(b.a)(a.state.query||"");if(!n)return console.error("Couldn't parse query document"),null;var o=e.getTokenAt(t),r={line:t.line,ch:o.start},i={line:t.line,ch:o.end},c={start:e.indexFromPos(r),end:e.indexFromPos(i)},l=n.definitions.find((function(e){if(!e.loc)return console.log("Missing location information for definition"),!1;var t=e.loc,n=t.start,o=t.end;return n<=c.start&&o>=c.end}));if(!l)return console.error("Unable to find definition corresponding position at ".concat(c.start)),null;var s="OperationDefinition"===l.kind?l.operation:"FragmentDefinition"===l.kind?"fragment":"unknown",u="OperationDefinition"===l.kind&&l.name?l.name.value:"FragmentDefinition"===l.kind&&l.name?l.name.value:"unknown",h=".graphiql-explorer-root #".concat(s,"-").concat(u),p=document.querySelector(h);p&&p.scrollIntoView()},a._handleEditQuery=function(e){return a.setState({query:e})},a._handleToggleExplorer=function(){a.setState({explorerIsOpen:!a.state.explorerIsOpen})},a.fetch=a.fetch.bind(Object(g.a)(a)),a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api-config").then((function(e){return e.json()}));case 2:return t=e.sent,this.loadCredentials(t),this.setState({apiInfo:t}),e.next=7,this.fetch({query:Object(k.a)()});case 7:n=e.sent,(o=this._graphiql.getQueryEditor()).setOption("extraKeys",x({},o.options.extraKeys||{},{"Shift-Alt-LeftClick":this._handleInspectOperation})),n&&n.data&&this.setState({schema:Object(A.a)(n.data)});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetch",value:function(e){var t={};return this.state.currentAuthMode===o.API_KEY?t["x-api-key"]=this.state.credentials.apiKey:this.state.currentAuthMode===o.AMAZON_COGNITO_USER_POOLS?t.Authorization=this.state.credentials.cognitoJWTToken:this.state.currentAuthMode===o.OPENID_CONNECT&&(t.Authorization=this.state.credentials.oidcJWTToken),z(e,t)}},{key:"storeCredentials",value:function(e){var t={apiInfo:x({},this.state.apiInfo,{authenticationType:e.authMode})};"API_KEY"===e.authMode?(t.apiKey=e.apiKey,window.localStorage.setItem(X,e.apiKey)):e.authMode===o.AMAZON_COGNITO_USER_POOLS?(t.cognitoJWTToken=e.cognitoToken,window.localStorage.setItem(F,e.cognitoToken)):e.authMode===o.OPENID_CONNECT&&(t.oidcJWTToken=e.OIDCToken,window.localStorage.setItem(V,e.OIDCToken)),this.setState((function(n){return{credentials:x({},n.credentials,{},t),currentAuthMode:e.authMode}}))}},{key:"loadCredentials",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.apiInfo,t={},n=[e.defaultAuthenticationType].concat(Object(l.a)(e.additionalAuthenticationProviders)),a=n.map((function(e){return e.authenticationType}));if(a.includes("API_KEY")&&(t.apiKey=R.apiKey),a.includes("AMAZON_COGNITO_USER_POOLS"))try{t.cognitoJWTToken=G(window.localStorage.getItem(F)||"")}catch(i){console.warn("Invalid Cognito token found in local storage. Using the default OIDC token"),t.cognitoJWTToken=G(K)}if(a.includes("OPENID_CONNECT")){var r=n.filter((function(e){return e.authenticationType===o.OPENID_CONNECT})).map((function(e){return e.openIDConnectConfig.Issuer}));try{t.oidcJWTToken=G(window.localStorage.getItem(V)||"",r[0])}catch(i){console.warn("Invalid OIDC token found in local storage. Using the default OIDC token"),t.oidcJWTToken=G(Z,r[0])}}return this.setState((function(){return{currentAuthMode:o[e.defaultAuthenticationType.authenticationType]||o.API_KEY}})),this.setState({credentials:t}),t}},{key:"render",value:function(){var e=this,t=this.state,n=t.query,a=t.schema,i=t.authModalVisible,c=t.apiInfo,s=[o[c.defaultAuthenticationType.authenticationType]].concat(Object(l.a)(c.additionalAuthenticationProviders.map((function(e){return o[e.authenticationType]})))).filter((function(e){return e})),u=i?r.a.createElement(L,{selectedAuthMode:this.state.currentAuthMode,currentOIDCToken:this.state.credentials.oidcJWTToken,currentCognitoToken:this.state.credentials.cognitoJWTToken,apiKey:this.state.credentials.apiKey,authModes:s,onClose:function(t){e.storeCredentials(t),e.setState({authModalVisible:!1})}}):null;return r.a.createElement(r.a.Fragment,null,u,r.a.createElement("div",{className:"graphiql-container"},r.a.createElement(E.a,{schema:a,query:n,onEdit:this._handleEditQuery,onRunOperation:function(t){return e._graphiql.handleRunQuery(t)},explorerIsOpen:this.state.explorerIsOpen,onToggleExplorer:this._handleToggleExplorer}),r.a.createElement(T.a,{ref:function(t){return e._graphiql=t},fetcher:this.fetch,schema:a,query:n,onEditQuery:this._handleEditQuery},r.a.createElement(T.a.Toolbar,null,r.a.createElement(T.a.Button,{onClick:function(){return e._graphiql.handlePrettifyQuery()},label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),r.a.createElement(T.a.Button,{onClick:function(){return e._graphiql.handleToggleHistory()},label:"History",title:"Show History"}),r.a.createElement(T.a.Button,{onClick:this._handleToggleExplorer,label:"Explorer",title:"Toggle Explorer"}),r.a.createElement(T.a.Button,{onClick:this.toggleAuthModal,label:"Update Auth",title:"Auth Setting"}),r.a.createElement(T.a.Select,{label:"Auth",onSelect:this.switchAuthMode},s.map((function(t){return r.a.createElement(T.a.SelectOption,{label:"Use:".concat(U[t]),value:t,key:t,selected:t===e.state.currentAuthMode})})))))))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[415,1,2]]]);
//# sourceMappingURL=main.5c0cf503.chunk.js.map